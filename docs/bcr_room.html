<!doctype html>
<html lang="zh-CN" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Baccarat · VIP Room</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&amp;family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      -webkit-tap-highlight-color: transparent;
    }
    
    .font-cinzel {
      font-family: 'Cinzel', serif;
    }
    
    .font-inter {
      font-family: 'Inter', sans-serif;
    }
    
    .gold-gradient {
      background: linear-gradient(135deg, #d4c396 0%, #b8a67a 50%, #d4c396 100%);
    }
    
    .gold-text {
      color: #d4c396;
    }
    
    .gold-glow {
      box-shadow: 0 0 20px rgba(212, 195, 150, 0.3), inset 0 1px 0 rgba(255,255,255,0.1);
    }
    
    .bet-btn {
      background: linear-gradient(180deg, rgba(30,30,35,0.95) 0%, rgba(20,20,25,0.98) 100%);
      border: 1px solid rgba(212, 195, 150, 0.3);
      transition: all 0.2s ease;
    }
    
    .bet-btn:active {
      transform: scale(0.96);
      box-shadow: 0 0 25px rgba(212, 195, 150, 0.4);
    }
    
    .bet-btn.active {
      border-color: rgba(212, 195, 150, 0.6);
      box-shadow: 0 0 30px rgba(212, 195, 150, 0.25);
    }
    
    .breathing {
      animation: breathe 2s ease-in-out infinite;
    }
    
    @keyframes breathe {
      0%, 100% { box-shadow: 0 0 15px rgba(212, 195, 150, 0.2); }
      50% { box-shadow: 0 0 25px rgba(212, 195, 150, 0.4); }
    }
    
    .chip {
      transition: all 0.15s ease;
      background: linear-gradient(145deg, #1a1a1f 0%, #0d0d10 100%);
      border: 2px solid rgba(100, 100, 110, 0.4);
    }
    
    .chip.selected {
      border-color: #d4c396;
      box-shadow: 0 0 15px rgba(212, 195, 150, 0.5);
      transform: translateY(-3px);
    }
    
    .chip:active {
      transform: scale(0.92);
    }
    
    .result-dot {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
    
    .video-container {
      background: linear-gradient(180deg, #0a0a0c 0%, #121216 100%);
      position: relative;
      overflow: hidden;
    }
    
    .video-overlay {
      background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, transparent 30%, transparent 70%, rgba(0,0,0,0.6) 100%);
    }
    
    .table-felt {
      background: radial-gradient(ellipse at center, #1a3d2e 0%, #0d251c 60%, #081510 100%);
    }
    
    .countdown-ring {
      stroke-dasharray: 251;
      stroke-dashoffset: 0;
      animation: countdown 15s linear infinite;
    }
    
    @keyframes countdown {
      to { stroke-dashoffset: 251; }
    }
    
    .status-pulse {
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .bottom-bar {
      background: linear-gradient(180deg, rgba(15,15,18,0.95) 0%, rgba(10,10,12,0.98) 100%);
      border-top: 1px solid rgba(212, 195, 150, 0.15);
    }
    
    .confirm-btn {
      background: linear-gradient(135deg, #d4c396 0%, #a89060 100%);
      color: #0f0f0f;
      font-weight: 600;
    }
    
    .confirm-btn:active {
      transform: scale(0.95);
      filter: brightness(0.9);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-inter bg-[#0f0f0f] text-white overflow-x-hidden">
  <div id="app" class="h-full flex flex-col" style="max-width: 414px; margin: 0 auto;"><!-- Top Header Bar -->
   <header class="fixed top-0 left-0 right-0 z-50 px-4 py-3 flex items-center justify-between" style="background: rgba(15,15,18,0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.05); max-width: 414px; margin: 0 auto;"><button class="w-10 h-10 flex items-center justify-center rounded-full" style="background: rgba(255,255,255,0.05);">
     <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="#d4c396" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7" />
     </svg></button>
    <div class="text-center">
     <h1 id="room-title" class="font-cinzel text-sm tracking-wider gold-text">Baccarat · VIP</h1>
     <div class="flex items-center justify-center gap-1.5 mt-0.5"><span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span> <span class="text-xs text-gray-400">128 在线</span>
     </div>
    </div><button class="w-10 h-10 flex items-center justify-center rounded-full" style="background: rgba(255,255,255,0.05);">
     <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="#888" stroke-width="2"><circle cx="12" cy="12" r="3" /> <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
     </svg></button>
   </header><!-- Main Content Area -->
   <main class="flex-1 pt-16 pb-20 overflow-y-auto"><!-- Video / Table Area -->
    <div class="px-3 pt-3">
     <div class="video-container rounded-xl overflow-hidden" style="aspect-ratio: 16/9;"><!-- Simulated Table Felt -->
      <div class="table-felt w-full h-full relative"><!-- Table markings -->
       <svg class="absolute inset-0 w-full h-full opacity-30" viewbox="0 0 320 180"><ellipse cx="160" cy="140" rx="140" ry="50" fill="none" stroke="#d4c396" stroke-width="0.5" /> <line x1="160" y1="90" x2="160" y2="180" stroke="#d4c396" stroke-width="0.3" /> <text x="80" y="135" fill="#d4c396" font-size="8" text-anchor="middle" opacity="0.6">
         PLAYER
        </text> <text x="240" y="135" fill="#d4c396" font-size="8" text-anchor="middle" opacity="0.6">
         BANKER
        </text>
       </svg><!-- Cards Display Area -->
       <div class="absolute inset-0 flex items-center justify-center gap-16"><!-- Player Cards -->
        <div class="flex gap-1">
         <div class="w-8 h-11 rounded bg-white shadow-lg flex items-center justify-center text-black font-bold text-xs">
          A♠
         </div>
         <div class="w-8 h-11 rounded bg-white shadow-lg flex items-center justify-center text-red-600 font-bold text-xs">
          K♥
         </div>
        </div><!-- Banker Cards -->
        <div class="flex gap-1">
         <div class="w-8 h-11 rounded bg-white shadow-lg flex items-center justify-center text-black font-bold text-xs">
          7♣
         </div>
         <div class="w-8 h-11 rounded bg-white shadow-lg flex items-center justify-center text-red-600 font-bold text-xs">
          2♦
         </div>
        </div>
       </div><!-- Video Overlay -->
       <div class="video-overlay absolute inset-0"></div><!-- Round Info - Top Left -->
       <div class="absolute top-3 left-3">
        <div class="text-xs text-gray-400">
         第 <span class="gold-text font-medium">2847</span> 局
        </div>
       </div><!-- Countdown Timer - Top Right -->
       <div class="absolute top-2 right-3 flex items-center gap-2">
        <div class="relative w-11 h-11">
         <svg class="w-full h-full -rotate-90" viewbox="0 0 88 88"><circle cx="44" cy="44" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="3" /> <circle cx="44" cy="44" r="40" fill="none" stroke="#d4c396" stroke-width="3" class="countdown-ring" />
         </svg>
         <div class="absolute inset-0 flex items-center justify-center"><span id="countdown" class="text-lg font-semibold gold-text">12</span>
         </div>
        </div>
       </div><!-- Score Display - Bottom -->
       <div class="absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-6">
        <div class="text-center">
         <div class="text-xs text-blue-400 mb-0.5">
          闲
         </div>
         <div class="text-xl font-bold text-white">
          1
         </div>
        </div>
        <div class="text-xs text-gray-500">
         VS
        </div>
        <div class="text-center">
         <div class="text-xs text-red-400 mb-0.5">
          庄
         </div>
         <div class="text-xl font-bold text-white">
          9
         </div>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Betting Status & Odds -->
    <div class="px-4 py-3 flex items-center justify-between">
     <div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-emerald-400 status-pulse"></span> <span class="text-sm text-emerald-400 font-medium">下注中</span>
     </div>
     <div class="flex items-center gap-4 text-xs text-gray-400"><span>庄 <span class="gold-text">1:1</span></span> <span>闲 <span class="gold-text">1:1</span></span> <span>和 <span class="gold-text">1:8</span></span>
     </div>
    </div><!-- Recent Results (Road) -->
    <div class="px-4 pb-3">
     <div class="flex items-center gap-1.5 overflow-x-auto py-1" style="scrollbar-width: none;"><!-- Results - B=Banker(red), P=Player(blue), T=Tie(green) -->
      <div class="result-dot bg-red-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-red-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-blue-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-red-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-blue-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-blue-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-emerald-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-red-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-blue-500 opacity-70 flex-shrink-0"></div>
      <div class="result-dot bg-red-500 opacity-90 flex-shrink-0"></div>
     </div>
    </div><!-- Main Betting Buttons -->
    <div class="px-3 py-2">
     <div class="flex gap-2"><!-- Banker Button --> <button id="btn-banker" class="bet-btn breathing flex-1 rounded-xl py-4 px-2 flex flex-col items-center justify-center gap-1" onclick="selectBet('banker')">
       <div class="text-xs text-gray-400 tracking-wide">
        BANKER
       </div>
       <div class="font-cinzel text-lg gold-text font-semibold">
        庄
       </div>
       <div class="text-xs text-red-400 mt-1">
        1:1
       </div>
       <div id="bet-banker" class="text-xs text-gray-500 mt-1">
        —
       </div></button> <!-- Tie Button --> <button id="btn-tie" class="bet-btn breathing flex-1 rounded-xl py-4 px-2 flex flex-col items-center justify-center gap-1" onclick="selectBet('tie')">
       <div class="text-xs text-gray-400 tracking-wide">
        TIE
       </div>
       <div class="font-cinzel text-lg gold-text font-semibold">
        和
       </div>
       <div class="text-xs text-emerald-400 mt-1">
        1:8
       </div>
       <div id="bet-tie" class="text-xs text-gray-500 mt-1">
        —
       </div></button> <!-- Player Button --> <button id="btn-player" class="bet-btn breathing flex-1 rounded-xl py-4 px-2 flex flex-col items-center justify-center gap-1" onclick="selectBet('player')">
       <div class="text-xs text-gray-400 tracking-wide">
        PLAYER
       </div>
       <div class="font-cinzel text-lg gold-text font-semibold">
        闲
       </div>
       <div class="text-xs text-blue-400 mt-1">
        1:1
       </div>
       <div id="bet-player" class="text-xs text-gray-500 mt-1">
        —
       </div></button>
     </div>
    </div><!-- Chip Selection -->
    <div class="px-4 py-4">
     <div class="flex justify-center gap-3"><button class="chip w-14 h-14 rounded-full flex flex-col items-center justify-center selected" data-value="10" onclick="selectChip(this, 10)"> <span class="text-xs font-semibold gold-text">RM</span> <span class="text-sm font-bold text-white">10</span> </button> <button class="chip w-14 h-14 rounded-full flex flex-col items-center justify-center" data-value="50" onclick="selectChip(this, 50)"> <span class="text-xs font-semibold gold-text">RM</span> <span class="text-sm font-bold text-white">50</span> </button> <button class="chip w-14 h-14 rounded-full flex flex-col items-center justify-center" data-value="100" onclick="selectChip(this, 100)"> <span class="text-xs font-semibold gold-text">RM</span> <span class="text-sm font-bold text-white">100</span> </button> <button class="chip w-14 h-14 rounded-full flex flex-col items-center justify-center" data-value="500" onclick="selectChip(this, 500)"> <span class="text-xs font-semibold gold-text">RM</span> <span class="text-sm font-bold text-white">500</span> </button>
     </div>
    </div><!-- Bet Summary -->
    <div class="px-4 py-2">
     <div class="flex items-center justify-between text-sm"><span class="text-gray-400">本局下注</span> <span id="total-bet" class="gold-text font-medium">RM 0</span>
     </div>
    </div>
   </main><!-- Bottom Action Bar -->
   <footer class="fixed bottom-0 left-0 right-0 bottom-bar px-4 py-3 flex items-center justify-between z-50" style="max-width: 414px; margin: 0 auto;">
    <div class="flex flex-col"><span class="text-xs text-gray-400">余额</span> <span id="balance-display" class="text-sm font-semibold gold-text">RM 12,580.00</span>
    </div><button class="px-5 py-2.5 rounded-lg text-sm text-gray-300 font-medium" style="background: rgba(255,255,255,0.08);" onclick="clearBets()"> 清除 </button> <button class="confirm-btn px-6 py-2.5 rounded-lg text-sm font-semibold" onclick="confirmBet()"> 确认下注 </button>
   </footer>
  </div>
  <script>
    // State
    let selectedChip = 10;
    let selectedBet = null;
    let bets = { banker: 0, tie: 0, player: 0 };
    let balance = 12580;
    let countdown = 12;

    // Default config
    const defaultConfig = {
      room_name: 'Baccarat · VIP',
      balance_amount: '12,580.00'
    };

    // Config change handler
    async function onConfigChange(config) {
      const roomTitle = document.getElementById('room-title');
      const balanceDisplay = document.getElementById('balance-display');
      
      if (roomTitle) {
        roomTitle.textContent = config.room_name || defaultConfig.room_name;
      }
      
      if (balanceDisplay) {
        balanceDisplay.textContent = 'RM ' + (config.balance_amount || defaultConfig.balance_amount);
      }
    }

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['room_name', config.room_name || defaultConfig.room_name],
          ['balance_amount', config.balance_amount || defaultConfig.balance_amount]
        ])
      });
    }

    // Select chip
    function selectChip(el, value) {
      document.querySelectorAll('.chip').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      selectedChip = value;
    }

    // Select bet area
    function selectBet(type) {
      selectedBet = type;
      bets[type] += selectedChip;
      updateBetDisplay();
      
      // Visual feedback
      const btn = document.getElementById('btn-' + type);
      btn.classList.add('active');
      setTimeout(() => btn.classList.remove('active'), 200);
    }

    // Update bet display
    function updateBetDisplay() {
      const total = bets.banker + bets.tie + bets.player;
      document.getElementById('total-bet').textContent = 'RM ' + total.toLocaleString();
      
      document.getElementById('bet-banker').textContent = bets.banker > 0 ? 'RM ' + bets.banker : '—';
      document.getElementById('bet-tie').textContent = bets.tie > 0 ? 'RM ' + bets.tie : '—';
      document.getElementById('bet-player').textContent = bets.player > 0 ? 'RM ' + bets.player : '—';
    }

    // Clear all bets
    function clearBets() {
      bets = { banker: 0, tie: 0, player: 0 };
      updateBetDisplay();
    }

    // Confirm bet
    function confirmBet() {
      const total = bets.banker + bets.tie + bets.player;
      if (total === 0) return;
      
      // Show confirmation feedback
      const btn = event.target;
      btn.textContent = '已确认 ✓';
      btn.style.background = 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)';
      
      setTimeout(() => {
        btn.textContent = '确认下注';
        btn.style.background = 'linear-gradient(135deg, #d4c396 0%, #a89060 100%)';
        clearBets();
      }, 1500);
    }

    // Countdown timer
    function startCountdown() {
      setInterval(() => {
        countdown--;
        if (countdown < 0) countdown = 15;
        document.getElementById('countdown').textContent = countdown;
      }, 1000);
    }

    startCountdown();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bfdf8a270629a6e',t:'MTc2ODczODAzOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
