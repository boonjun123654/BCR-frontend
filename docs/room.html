<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Baccarat Room</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#0b0f14] text-white">

<header class="p-4 flex justify-between items-center border-b border-[#1f2933]">
  <a href="lobby.html" class="text-sm text-[#d4af37]">← Lobby</a>
  <div class="text-sm">
    Wallet:
    <span class="wallet-balance text-[#d4af37] font-semibold"></span>
  </div>
</header>

<main class="p-4 space-y-4 max-w-md mx-auto">

  <!-- Round Info -->
  <div class="bg-[#121821] p-4 rounded-xl border border-[#1f2933]">
    <div class="flex justify-between items-center">
      <span class="text-sm opacity-70">第 6 / 10 局</span>
      <span id="roundStatus" class="text-green-400 font-semibold">
        下注中 · <span id="countdown">15</span>s
      </span>
    </div>
  </div>

  <!-- History -->
  <div class="bg-[#121821] p-4 rounded-xl border border-[#1f2933]">
    <div class="text-sm opacity-70 mb-2">最近结果</div>
    <div class="flex gap-2 flex-wrap">
      <span class="w-6 h-6 flex items-center justify-center rounded-full bg-red-600 text-xs">庄</span>
      <span class="w-6 h-6 flex items-center justify-center rounded-full bg-blue-600 text-xs">闲</span>
      <span class="w-6 h-6 flex items-center justify-center rounded-full bg-red-600 text-xs">庄</span>
      <span class="w-6 h-6 flex items-center justify-center rounded-full bg-green-600 text-xs">和</span>
      <span class="w-6 h-6 flex items-center justify-center rounded-full bg-blue-600 text-xs">闲</span>
    </div>
  </div>

  <!-- Banker Pool -->
  <div class="bg-[#121821] p-4 rounded-xl border border-[#1f2933]">
    <div class="flex justify-between items-center mb-2">
      <div class="font-semibold">庄家池</div>
      <button onclick="openBankerModal()"
        class="text-xs bg-[#d4af37]/20 text-[#d4af37] px-3 py-1 rounded-full">
        合庄 / 上庄
      </button>
    </div>

    <div class="text-[#d4af37] text-xl">RM 28,900</div>

    <div class="mt-3 text-sm opacity-80 space-y-1">
      <div>玩家A · 50%</div>
      <div>玩家B · 30%</div>
      <div>玩家C · 20%</div>
    </div>
  </div>

  <!-- Bet Heat -->
  <div class="bg-[#121821] p-4 rounded-xl border border-[#1f2933]">
    <div class="text-sm opacity-70 mb-3">下注热度</div>

    <div class="mb-3">
      <div class="flex justify-between text-xs mb-1">
        <span class="text-red-400">庄</span><span>60%</span>
      </div>
      <div class="w-full h-2 bg-[#1f2933] rounded">
        <div class="h-2 bg-red-600 rounded" style="width:60%"></div>
      </div>
    </div>

    <div>
      <div class="flex justify-between text-xs mb-1">
        <span class="text-blue-400">闲</span><span>40%</span>
      </div>
      <div class="w-full h-2 bg-[#1f2933] rounded">
        <div class="h-2 bg-blue-600 rounded" style="width:40%"></div>
      </div>
    </div>
  </div>

  <!-- Betting Area -->
  <div class="relative">
    <div class="bg-[#121821] p-4 rounded-xl border border-[#1f2933] space-y-3">
      <div class="grid grid-cols-2 gap-3">
        <button onclick="bet(50)" class="bg-red-600 py-3 rounded-lg font-bold">庄 1:1</button>
        <button onclick="bet(50)" class="bg-blue-600 py-3 rounded-lg font-bold">闲 1:1</button>
      </div>
      <div class="grid grid-cols-2 gap-3">
        <button onclick="bet(50)" class="bg-green-600 py-3 rounded-lg font-bold">和 1:8</button>
        <button onclick="bet(50)" class="bg-purple-600 py-3 rounded-lg font-bold">对子 1:11</button>
      </div>
    </div>

    <div id="loginMask"
      class="absolute inset-0 bg-black/70 flex items-center justify-center rounded-xl">
      <div class="text-center">
        <div class="mb-3 text-sm opacity-80">登录后即可下注</div>
        <a href="login.html"
          class="bg-[#d4af37] text-black px-4 py-2 rounded-lg font-semibold">登录</a>
      </div>
    </div>
  </div>
</main>

<!-- 合庄弹窗 -->
<div id="bankerModal"
  class="fixed inset-0 bg-black/70 flex items-end justify-center z-50 hidden">
  <div class="bg-[#121821] w-full max-w-md rounded-t-2xl p-5 border-t border-[#1f2933]">
    <div class="flex justify-between items-center mb-4">
      <div class="text-lg font-bold text-[#d4af37]">合庄 · 上庄</div>
      <button onclick="closeBankerModal()">✕</button>
    </div>

    <div class="text-sm opacity-80 mb-4">
      最低上庄：RM 5,000<br>
      当前庄家：2 / 3
    </div>

    <input id="bankerAmount" type="number" placeholder="输入金额"
      oninput="updatePreview()"
      class="w-full p-2 mb-3 rounded bg-[#0b0f14] border border-[#1f2933]">

    <div class="text-sm mb-4">
      预计占比：
      <span id="bankerPreview" class="text-[#d4af37]">0%</span>
    </div>

    <button onclick="confirmBanker()"
      class="w-full bg-[#d4af37] text-black py-3 rounded-lg font-bold">
      确认上庄
    </button>
  </div>
</div>

<script src="js/app.js"></script>
<script>
function openBankerModal() {
  if (!APP.loggedIn) return location.href = 'login.html';
  document.getElementById('bankerModal').classList.remove('hidden');
}
function closeBankerModal() {
  document.getElementById('bankerModal').classList.add('hidden');
}
function updatePreview() {
  const v = Number(bankerAmount.value || 0);
  bankerPreview.innerText = ((v / (28900 + v)) * 100).toFixed(1) + '%';
}
function confirmBanker() {
  alert('上庄成功（模拟）');
  closeBankerModal();
}
if (APP.loggedIn) loginMask.style.display = 'none';
</script>

</body>
</html>
